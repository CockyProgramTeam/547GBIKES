<!DOCTYPE html>
<html>
<head>
  <title>Access Restricted</title>
  <link rel="stylesheet" href="login.css" />
<link rel="stylesheet" href="dropmenu.css" />
<script src="./js/bikes.js"></script>
  <style>
        html, body {
      height: 100%;
      margin: 0;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
      text-align: center;
      display: flex;
      flex-direction: column;
    }

    main {
      flex: 1;
    }

     /* --- Navigation Bar --- */
     .navbar {
        background-color: #1F3D7A;
        padding: 10px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .navbar .nav-left .logo{
        font-size: 22px;
        font-weight: bold;
        color: white;
        display: flex;
        align-items: center;
      }
      .navbar .nav-right {
        display: flex;
        align-items: center;
      }
      .navbar .nav-right span {
        color: white;
        font-weight: bold;
        margin-right: 20px;
      }
      .navbar .nav-right #button {
        background-color: white;
        text-decoration: none;
        color: black;
        border: none;
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
      }
      .navbar .nav-right #button:hover {
        background-color: lightgreen;
      }

    .container {
      margin-top: 60px;
      background-color: white;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      display: inline-block;
    }

    p {
      font-size: 1.2em;
      color: #333;
    }

    a {
      color: #1F3D7A;
      text-decoration: none;
      font-weight: bold;
    }

    a:hover {
      text-decoration: underline;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      background-color: #1F3D7A;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }
    /* Footer */
.footer {
    background-color: #1F3D7A;
    color: white;
    text-align: center;
    padding: 10px 0;
    font-size: 14px;
    font-weight: bold;
    margin-top: auto;
}
  </style>
</head>
<body onload="checkUserStatus(); displayProfilePicture(); callLogAdmin()">
  <!-- Navigation Bar -->
  <div class="navbar">
    <div class="nav-left">
      <div class="dropdown">
        <button class="jsmenu"><img src="./images/jsmenu4.png"></button> 
        <div class="dropdown-content">
		  <a href="about.html">About</a>	
          <a href="index.html">Site Home</a>
          <a href="cart5.html">MyCart</a>
          <a href="mybookings5.html">MyReservations</a>
          <a href="manager.html">Superuser</a>
		  <a href="manager.html">Utilities</a>
        </div>
      </div> 
      <div class="logo">&nbsp;&nbsp;MyLinkv25 - Admin Error</div>
    </div>
    <div class="nav-right">
      <img src="./images/bluecircle.png" id="profilephototarget" alt="User" style="cursor:pointer;" onclick="window.location.href='profile.html'" />
      <span id="H3UserBanner"></span>
      <a href="login.html" id="loginBtn" class="btn secondary-btn" onclick="loginUser(event)">Login</a>
      <a href="login.html" id="logoutBtn" class="btn secondary-btn" onclick="logoutUser(event)">Logout</a>
      <a href="cart5.html?uid=1" id="cartBtn" class="btn secondary-btn" onclick="checkUser(event)">Cart</a>
    </div>
  </div>

  <div align="center" id="banner"><span id="userGreeting">Welcome Guest</span></div>

  <div class="container">
    <p>You have reached this page because you are not an Administrator or SuperUser. You may have rights to reach other pages on the Navigation menu. Your access attempt has been logged. <a href="https://home.547bikes.info/login.html" target="_blank"></a></p>
    <button onclick="call_login()">Login Now</button>
  </div>
  <!-- Footer -->
  <footer class="footer">
    &copy; 2025 Cocky Consulting.
    <br>
    All rights reserved.
  </footer>
  <script>
    
	function callLogAdmin()
	{
	console.log('Logging failed Admin access!');
	sendadminsecuritylogs();
	}

	  function sendadminsecuritylogs() {
  const uid = localStorage.getItem('uid');
  if (!uid) {
    console.error('UID not found in localStorage');
    return;
  }

  const payload = {
    id: 0,
    userid: uid,
    date: new Date().toISOString(),
    description: "Security log entry",
    acknowledged: "false",
    techid: 0,
    managerescid: 0,
    threatlevel: "low"
  };

  fetch('https://parksapi.547bikes.info/api/Adminlogs', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(payload)
  })
  .then(response => {
    if (!response.ok) {
      throw new Error(`Server responded with ${response.status}`);
    }
    return response.json();
  })
  .then(data => {
    console.log('Log submitted successfully:', data);
  })
  .catch(error => {
    console.error('Error submitting log:', error);
  });
}
    
  </script>
</body>
</html>
