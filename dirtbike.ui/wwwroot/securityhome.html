<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EIS Admin Home</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="login.css" />
  <link rel="stylesheet" href="dropmenu.css" />
  <script src="./js/bikes.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<style>
 .jsmenu {
  padding: 0;
  margin: 0;
  border: none;
  background: none;
  width: 50px;
  height: 50px;
  display: inline-block;
}

.jsmenu img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover; /* Optional: ensures image fills the button */
  border: none;
}

.jsfooterextension
{
  display: flex;
  justify-content: center;   /* Horizontal alignment */
  align-items: center;       /* Vertical alignment */
  background-color: grey;
  max-height: 250px;
  height: 250px;
  font-size: 8pt;
}

#userGreeting
{
text-align: center;
vertical-align: middle;
color: yellow;
}
#banner
{
background-color: lightgrey;
height: 260px;
vertical-align: middle;
width: 100%;
}

#cancelBtn
{
width: 400px;
}

#splash
{
font-size: 12pt;
}

.feature
{
max-height: 200px;
min-height: 200px;
max-width: 250px;
min-width: 250px;
gap: 15px;
}

.accordion {
  background-color: #eee;
  color: #444;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
  transition: 0.4s;
}

.active, .accordion:hover {
  background-color: #ccc; 
}

.panel {
  padding: 0 18px;
  display: none;
  background-color: white;
  overflow: hidden;
}
</style>

</head>


<body onload="checkUserStatus(); displayProfilePicture(); writelocation();">
     <!-- Navigation Bar -->
    <div class="navbar">
      <div class="nav-left">
            <div class="dropdown">
                  <button class="jsmenu"><img src="./images/jsmenu4.png"></button> 
                  <div class="dropdown-content">
                  <a href="index.html">Site Home</a>
                  <a href="cart5.html?uid=1">MyCart</a>
                  <a href="mybookings5.html">MyReservations</a>
                  <a href="manager.html">Manager Utilities</a>
            </div>
    </div> 
      <div class="logo">&nbsp&nbsp<H5>MyLinkv25</H5></div>
      </div>
      <div class="nav-right">
        <img src="./images/bluecircle.png" id="profilephototarget" alt="User" style="cursor:pointer;" onclick="window.location.href='profile.html'" />
        <span id="H3UserBanner"></span>
        <a href="login.html" id="loginBtn" class="btn secondary-btn" onclick="loginUser(event)">Login</a>
        <a href="login.html" id="logoutBtn" class="btn secondary-btn" onclick="logoutUser(event)">Logout</a>
        <a href="cart5.html?uid=1" id="cartBtn" class="btn secondary-btn" onclick="checkUser(event)">Cart</a>
      </div>
    </div>
    <div align="center" id="banner" style="height: 60px;"><span id="userGreeting">Welcome Guest</span><BR>
      <p>Manage Teams, Add Users, Visit EIS Home, Review logs.</p>
    </div>
  
  <!-- Logs Section -->
  <div class="logsheader" id="logheader" align="center">
    <hr />
    <h5>SecurityHome</h5>
    <hr />
  </div>
  <div class="jrow">
    <div class="jcolumn">
      <button class="accordion" onclick="fetchSyslog()">
        Security Actions and Logs (+/-)
      </button>
      <div class="panel" style="background-color:#aaa;">
        <p id="syslogDisplay">Security Logs Will Be Displayed Here</p>
      </div>
    </div>
     <div class="jcolumn">
      <button class="accordion" onclick="fetchApilog()">
        API Actions and Logs (+/-)
      </button>
      <div class="panel" style="background-color:#bbb;">
        <p id="apilogDisplay">ApiLogs Will Be Displayed Here.</p>
      </div>
    </div>
  </div>
    <div class="jrow">
    <div class="jcolumn">
      <button class="accordion" onclick="fetchLearnlog()">
        Learn Actions and Logs (+/-)
      </button>
      <div class="panel" style="background-color:#ccc;">
        <p id="learnlogDisplay">LearnLogs Will Be Displayed Here</p>
      </div>
    </div>
      <div class="jcolumn">
      <button class="accordion" onclick="fetchSessionlog()">
        UserSessions (+/-)
      </button>
      <div class="panel" style="background-color:#ccc;">
        <p id="sessionlogDisplay">SessionLogs Will Be Displayed Here</p>
      </div>
    </div>
  </div>


  <div id="userModal" style="display:none; position:fixed; top:20%; left:35%; background:#fff; border:1px solid #ccc; padding:20px;">
  <h3>Create New User</h3>
  <label>Username: <input type="text" id="username"></label><br>
  <label>Full Name: <input type="text" id="fullname"></label><br>
  <label>Password: <input type="password" id="plainpassword"></label><br>
  <label>Employee: 
    <select id="employee">
      <option value="1">Yes</option>
      <option value="0">No</option>
    </select>
  </label><br><br>
  <button onclick="submitUser()">Submit</button>
</div>
  <script>
    
    
    function fetchSyslog() {
      $.get(
        "https://gridactions3b.547bikes.info/api/Userlog"
      )
        .done((data) => $("#syslogDisplay").text(JSON.stringify(data, null, 2)))
        .fail(() => $("#syslogDisplay").text("Error fetching syslog"));
    }
    function fetchSessionlog() {
      $.get(
        "https://gridactions3b.547bikes.info/api/Usersession"
      )
        .done((data) => $("#sessionlogDisplay").text(JSON.stringify(data, null, 2)))
        .fail(() => $("#sessionlogDisplay").text("Error fetching syslog"));
    }
    function fetchApilog() {
      $.get(
        "https://gridactions3b.547bikes.info/api/Apilog"
      )
        .done((data) => $("#apilogDisplay").text(JSON.stringify(data, null, 2)))
        .fail(() => $("#apilogDisplay").text("Error fetching apilog"));
    }
    function fetchLearnlog() {
      $.get(
        "https://gridactions3b.547bikes.info/api/Learndetail"
      )
        .done((data) =>
          $("#learnlogDisplay").text(JSON.stringify(data, null, 2))
        )
        .fail(() => $("#learnlogDisplay").text("Error fetching learnlog"));
    }
    
      
    
    //JOHNS ACCORDIAN SCRIPTS DO NOT TOUCH OR THIS WONT WORK.... 
    var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
  acc[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.display === "block") {
      panel.style.display = "none";
    } else {
      panel.style.display = "block";
    }
  });
}
 function writelocation()
    {
    const locElement = document.getElementById("locationbar");
    const ipElement = document.getElementById("ipbar");
    //var somelat = localStorage.getItem("LAT");
    //var somelong = localStorage.getItem("LONG");
    somefulllocation = localStorage.getItem("userlocation");
    someipaddress = localStorage.getItem("ipaddress");
    //var fulllocation = somelong + "," + somelat;

 if (somefulllocation) {
        //const fullLocation = `${somelat},${somelong}`;
        locElement.innerHTML = `Your Location is: ${somefulllocation}`;
        ipElement.innerHTML = `Your IP is: ${someipaddress}`;
    } else {
        locElement.innerHTML = "Location data not available.";
        ipElement.innerHTML = `Your IP address is not available.`;
    }
}
  </script>
</body>
      
    
    <footer class="footer"> &copy; Cocky Consulting 2025. <br> All rights reserved.<br>  <span align="center"><a href="sitemap.html" class="sitelink">SiteMap</a></span></footer>
