<!DOCTYPE html>
<html lang="en">
<head>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="login.css" />
  <link rel="stylesheet" href="dropmenu.css" />
  <script src="./js/bikes.js"></script>
  <title>MyLink Learn</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <style>
    /* reset & layout */
    * { box-sizing: border-box; margin:0; padding:0 }
    html, body { height:100%; font-family: Arial, sans-serif; background:#F2F2F2; }
    body { display:flex; flex-direction:column; }
    main { flex:1; display:flex; }

    /* navbar */
    .navbar {
      background:#1F3D7A;
      padding:10px 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    .nav-left, .nav-right { display:flex; align-items:center; }
    .nav-left a {
      background:#3E5BA8;
      color:#fff;
      text-decoration:none;
      font-weight:bold;
      margin-right:12px;
      padding:6px 12px;
      border-radius:4px;
      white-space:nowrap;
    }
    .nav-left a:hover { background:#2e4a90 }

    .nav-right img {
      width:35px;
      height:35px;
      border-radius:50%;
      margin-right:8px;
      object-fit:cover;
      cursor:pointer;
    }
    .nav-right span {
      color:#fff;
      font-weight:bold;
      margin-right:20px;
      white-space:nowrap;
    }
    .nav-right button {
      background:#f44336;
      color:#fff;
      border:none;
      padding:6px 12px;
      border-radius:4px;
      cursor:pointer;
    }
    .nav-right button:hover { background:#d32f2f }

    /* sidebar + content */
    .sidebar {
      width:14%;
      background:#f1f1f1;
      padding:10px;
      overflow:auto;
    }
    .sidebar h5 {
      margin-top:15px;
      margin-bottom:5px;
      text-align:center;
      font-size:14px;
    }
    .sidebar button {
      width:100%;
      margin:5px 0;
      font-size:9px;
      cursor:pointer;
    }
    .content {
      flex:1;
      padding:20px;
    }

/* Footer */
.footer {
    background-color: #1F3D7A;
    color: white;
    text-align: center;
    padding: 10px 0;
    font-size: 14px;
    font-weight: bold;
    margin-top: auto;
}
  
  button
  {
  width: 120px;
  }
  
  </style>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script>
    const usersApiUrl = "https://gridactions3b.547bikes.info/api/Users";
    const profilesApiUrl = "https://gridactions3b.547bikes.info/api/Userprofile";
    const userApiLog = "https://gridactions3b.547bikes.info/api/Userlog";

    // Redirect anonymous/guest
    function checkpll() {
      const uid = localStorage.getItem("uid");
      if (!uid || uid === "901") {
        window.location.href = "loginerror.html";
      }
      $.get(usersApiUrl).done(users => {
                currentUser = users.find(u => u.id == uid);
                $('#H3UserBanner').text(currentUser.fullname);
                fetchProfilePicture();
            });
    }

    function checkUserRole() {
  var userRole = localStorage.getItem("role");
  var homeLink = document.getElementById("homeLink");

   if(userRole === "admin") {
      homeLink.href="adminhome.html";
    }
    else{
	homeLink.href="employeehome.html";
    }
  }
  window.onload = function() {
  checkpll();
  checkUserRole();
};

            function fetchProfilePicture() {
            $.get(profilesApiUrl).done(profs => {
                const uid = localStorage.getItem("uid");
                if (!uid) return;
                let p = profs.find(x => x.userid == uid);
                if (p?.activepictureurl) $('.navbar img').attr('src', p.activepictureurl);
            });
        }

    // On logout: reset guest and go to login
    function onLogout() {
      localStorage.setItem("uid", "901");
      localStorage.setItem("fullname", "590 Visitor");
      localStorage.setItem("role", "guest");
      localStorage.setItem("status", "loggedout");
      window.location.href = "login.html";
    }

    // Log userâ€™s page visit
    function callloguseractions() {
      const someuid     = Number(localStorage.getItem("uid"));
      const someemail   = localStorage.getItem("email");
      const somerole    = localStorage.getItem("role");
      const somefullname= localStorage.getItem("fullname");
      const somelogindescription =
        `User:${somefullname} is on CELEARN as a ${somerole} On Date: ${new Date()}`;
      $.ajax({
        url: "https://gridactions3b.capitoltechnology.net/api/Userlog",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify({
          descr: somelogindescription,
          fullname: somefullname,
          role: somerole,
          userid: someuid,
          employeeid: someuid
        })
      }).fail((xhr, status, err) =>
        console.error("UserLog Error:", xhr.status, err)
      );
    }

    // Post learning-detail then open video
    function callloadlearning(id, uid, sku) {
      callloguseractions();
      const today = new Date();
      const nextYear = new Date(today.getFullYear()+1, today.getMonth(), today.getDate())
                         .toISOString().split("T")[0];
      const twoYears = new Date(today.getFullYear()+2, today.getMonth(), today.getDate())
                         .toISOString().split("T")[0];
      const body = {
        description: sku,
        category: "FrontOffice",
        startdate: nextYear,
        enddate: twoYears,
        certauthority: "CockyLearningTrainingDepartment",
        status: "OnlineTraining",
        userid: Number(uid),
        employeeidasint: Number(uid),
        employeeid: uid,
        employee: 1,
        learningmodulesid: id,
        cataloguesku: sku,
        fullname: localStorage.getItem("fullname")
      };
      $.ajax({
        url: "https://gridactions3b.capitoltechnology.net/api/Learndetail",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify(body)
      }).fail(err =>
        console.log("LearnDetail error:", body)
      );
    }

    // 30 individual calls
    function call01() { const u=localStorage.getItem("uid"); callloadlearning(1,u,"CELEARNHOME");    window.open("https://www.youtube.com/embed/4yzGJdJyJsg?si=ixZoWt1dNY1j6cGw","centercourt"); }
    function call02() { const u=localStorage.getItem("uid"); callloadlearning(2,u,"Ionic-React-M");  window.open("https://www.youtube.com/embed/K7ghUiXLef8","centercourt"); }
    function call03() { const u=localStorage.getItem("uid"); callloadlearning(3,u,"React-Native-M");window.open("https://www.youtube.com/embed/0-S5a0eXPoc","centercourt"); }
    function call04() { const u=localStorage.getItem("uid"); callloadlearning(4,u,"React-Native-UI");window.open("https://www.youtube.com/embed/SqcY0GlETPk","centercourt"); }
    function call05() { const u=localStorage.getItem("uid"); callloadlearning(5,u,"Bootstrap5");      window.open("https://www.youtube.com/embed/Jyvffr3aCp0","centercourt"); }
    function call06() { const u=localStorage.getItem("uid"); callloadlearning(6,u,"CrystalReports");window.open("https://www.youtube.com/embed/lmaw3k7flXk","centercourt"); }
    function call07() { const u=localStorage.getItem("uid"); callloadlearning(7,u,"Csharp.RestAPIs");window.open("https://www.youtube.com/embed/261D2awiPP4","centercourt"); }
    function call08() { const u=localStorage.getItem("uid"); callloadlearning(8,u,"WebProxyToRest");window.open("https://www.youtube.com/embed/Jyvffr3aCp0","centercourt"); }
    function call09() { const u=localStorage.getItem("uid"); callloadlearning(9,u,"DBFirst vs CodeFirst");window.open("https://www.youtube.com/embed/CLVJVA9cTuU","centercourt"); }
    function call10() { const u=localStorage.getItem("uid"); callloadlearning(10,u,"RevEngine.EFCore");window.open("https://www.youtube.com/embed/SrEjoJ_G6tc","centercourt"); }
    function call11() { const u=localStorage.getItem("uid"); callloadlearning(11,u,"SQLServer Management Studio"); window.open("https://www.youtube.com/embed/GiqqopBSoHw","centercourt"); }
    function call12() { const u=localStorage.getItem("uid"); callloadlearning(12,u,"MySQL Workbench");window.open("https://www.youtube.com/embed/X_umYKqKaF0","centercourt"); }
    function call13() { const u=localStorage.getItem("uid"); callloadlearning(13,u,"Oracle SQL Developer");window.open("https://www.youtube.com/embed/rnMa6HQ1_AE","centercourt"); }
    function call14() { const u=localStorage.getItem("uid"); callloadlearning(14,u,"CosmosDB Globalization");window.open("https://www.youtube.com/embed/R_Fi59j6BMo","centercourt"); }
    function call15() { const u=localStorage.getItem("uid"); callloadlearning(15,u,"PostgresDB Globalization");window.open("https://www.youtube.com/embed/fI3mWKqxUrk","centercourt"); }
    function call16() { const u=localStorage.getItem("uid"); callloadlearning(16,u,"MongoDB Global");window.open("https://www.youtube.com/embed/FimrsNEJ83c","centercourt"); }
    function call17() { const u=localStorage.getItem("uid"); callloadlearning(17,u,"FusionDevOps & AgilePlus");window.open("https://www.youtube.com/embed/Jyvffr3aCp0","centercourt"); }
    function call18() { const u=localStorage.getItem("uid"); callloadlearning(18,u,"StrangeBrew");window.open("https://www.youtube.com/embed/SrEjoJ_G6tc","centercourt"); }
    function call19() { const u=localStorage.getItem("uid"); callloadlearning(19,u,"StrangeFarms");window.open("https://www.youtube.com/embed/Jyvffr3aCp0","centercourt"); }
    function call20() { const u=localStorage.getItem("uid"); callloadlearning(20,u,"StrangeGrids");window.open("https://www.youtube.com/embed/SrEjoJ_G6tc","centercourt"); }
    function call21() { const u=localStorage.getItem("uid"); callloadlearning(21,u,"GEM Global");window.open("https://www.youtube.com/embed/SrEjoJ_G6tc","centercourt"); }
    function call22() { const u=localStorage.getItem("uid"); callloadlearning(22,u,"ComplexParams");window.open("https://www.youtube.com/embed/kJRAARCSkN4","centercourt"); }
    function call23() { const u=localStorage.getItem("uid"); callloadlearning(23,u,"FusionShell");window.open("https://www.youtube.com/embed/kJRAARCSkN4","centercourt"); }
    function call24() { const u=localStorage.getItem("uid"); callloadlearning(24,u,"FusionShellPlus & FusionMobile");window.open("https://www.youtube.com/embed/kJRAARCSkN4","centercourt"); }
    function call25() { const u=localStorage.getItem("uid"); callloadlearning(25,u,"FusionShellProfessional ERP");window.open("https://www.youtube.com/embed/kJRAARCSkN4","centercourt"); }
    function call26() { const u=localStorage.getItem("uid"); callloadlearning(26,u,"AzureSQL");window.open("https://www.youtube.com/embed/lun6A0TtwKM","centercourt"); }
    function call27() { const u=localStorage.getItem("uid"); callloadlearning(27,u,"GEM Developer");window.open("https://www.youtube.com/embed/lun6A0TtwKM","centercourt"); }
    function call28() { const u=localStorage.getItem("uid"); callloadlearning(28,u,"Velocity Wholesale ISP");window.open("https://www.youtube.com/embed/lun6A0TtwKM","centercourt"); }
    function call29() { const u=localStorage.getItem("uid"); callloadlearning(29,u,"FusionAI Services");window.open("https://www.youtube.com/embed/lun6A0TtwKM","centercourt"); }
    function call30() { const u=localStorage.getItem("uid"); callloadlearning(30,u,"Ionic-Electron");window.open("https://www.youtube.com/embed/Jrj2qMPWCZ0","centercourt"); }
    function call31() { const u=localStorage.getItem("uid"); callloadlearning(31,u,"JavaFX/Sling-Graphics");window.open("https://www.youtube.com/embed/FxHbXY34iFQ?si=TB8jxHZ2srdoWzTk","centercourt"); }
    function call32() { const u=localStorage.getItem("uid"); callloadlearning(32,u,"GreenvilleUI-PHP-Basics");window.open("https://www.youtube.com/embed/FxHbXY34iFQ?si=TB8jxHZ2srdoWzTk","centercourt"); }
    function call33() { const u=localStorage.getItem("uid"); callloadlearning(33,u,"MyLink Module for FusionPro");window.open("https://www.youtube.com/embed/FxHbXY34iFQ?si=TB8jxHZ2srdoWzTk","centercourt"); }
    function call34() { const u=localStorage.getItem("uid"); callloadlearning(34,u,"FusionDynamicWeb");window.open("https://www.youtube.com/embed/FxHbXY34iFQ?si=TB8jxHZ2srdoWzTk","centercourt"); }
    function call40() { const u=localStorage.getItem("uid"); callloadlearning(40,u,"Tableau Overview");window.open("https://www.youtube.com/embed/7Jl-RwkzqQ4?si=VPPS7V_CzqPmhwmx","centercourt"); }
    function call41() { const u=localStorage.getItem("uid"); callloadlearning(41,u,"RStudio IDE");window.open("https://www.youtube.com/embed/FIrsOBy5k58?si=EKnZztDY7ISjWuCX","centercourt"); }
    function call42() { const u=localStorage.getItem("uid"); callloadlearning(42,u,"Python Visualizations");window.open("https://www.youtube.com/embed/4O_o53ag3ag?si=9sz_rZ9gDOwRfa0D","centercourt"); }
    function call43() { const u=localStorage.getItem("uid"); callloadlearning(43,u,"D3 Javascript Visualizations");window.open("https://www.youtube.com/embed/C4t6qfHZ6Tw?si=qOn_D2G9olTlcOLw","centercourt"); }
    function call44() { const u=localStorage.getItem("uid"); callloadlearning(44,u,"ChartJS Javascript Visualizations");window.open("https://www.youtube.com/embed/yD3kXXJTqsc?si=uMGdQcC3q5Qkkfoa","centercourt"); }
    function call45() { const u=localStorage.getItem("uid"); callloadlearning(45,u,"AnalyticsOverview");window.open("https://www.youtube.com/embed/yZvFH7B6gKI?si=5Tz23KgXVre7cyNn","centercourt"); }	  
	  
    // // on DOM ready
    // $(function(){
    //   checkpll();
    // });

	  function displayProfilePicture()
    {
        var newSrc = './images/bluecircle.png'; 
        const imageElement = document.getElementById("profilephototarget");

      const tempSrc = localStorage.getItem("activepictureurl");
      if (tempSrc !== null) {
          newSrc = tempSrc;
        } 
      else {
            // Do Nothing.... Blue Circle will show.
        }
         imageElement.src = newSrc;
    }
  </script>
</head>

<body onload="checkpll(); checkUserStatus(); displayProfilePicture();">
    <!-- Navigation Bar -->
    <div class="navbar">
      <div class="nav-left">
            <div class="dropdown">
                  <button class="jsmenu"><img src="./images/jsmenu4.png"></button> 
                  <div class="dropdown-content">
                  <a href="index.html">Site Home</a>
                  <a href="cart5.html?uid=1">MyCart</a>
                  <a href="parks5.html">Review Park Options</a>
                  <a href="parksreview5.html">Park Reviews</a>
                  <a href="mybookings5.html">MyReservations</a>
                  <a href="manager.html">Manager Utilities</a>
             </div>
    </div> 
      <div class="logo">&nbsp&nbsp<H5>MyLinkv25 - Review Parks</H5></div>
      </div>
      <div class="nav-right">
        <img src="./images/bluecircle.png" id="profilephototarget" alt="User" style="cursor:pointer;" onclick="window.location.href='profile.html'" />
        <span id="H3UserBanner"></span>
        <a href="login.html" id="loginBtn" class="btn secondary-btn" onclick="loginUser(event)">Login</a>
        <a href="login.html" id="logoutBtn" class="btn secondary-btn" onclick="logoutUser(event)">Logout</a>
        <a href="cart5.html?uid=1" id="cartBtn" class="btn secondary-btn" onclick="checkUser(event)">Cart</a>
      </div>
    </div>
<div align="center" id="banner"><span id="userGreeting">Welcome Guest</span></div>

  <main>
    <!-- Sidebar -->
    <div class="sidebar">
      <h5>FrontOffice & UI</h5>
      <button onclick="call01()">CE.Learn Home</button>
      <button onclick="call02()">Ionic-React-M</button>
      <button onclick="call03()">React-Native-M</button>
      <button onclick="call04()">React-Native-UI</button>
      <button onclick="call05()">Bootstrap5</button>
      <button onclick="call22()">ComplexParams</button>
      <button onclick="call30()">IonicElectron</button>
      <button onclick="call31()">JavaFX</button>	    

      <h5>BackOffice & API</h5>
      <button onclick="call06()">CrystalReports</button>
      <button onclick="call07()">CSharp.RestAPIs</button>
      <button onclick="call08()">WebProxyToRest</button>
      <button onclick="call09()">DBFirstVsCodeFirst</button>
      <button onclick="call10()">RevEngine.EFCore</button>

      <h5>SQL Training</h5>
      <button onclick="call26()">AzureSQL</button>
      <button onclick="call11()">SQLMgmtStudio</button>
      <button onclick="call12()">MySQL.Workbench</button>
      <button onclick="call13()">Oracle.SQLDeveloper</button>
      <button onclick="call14()">A.CosmosDB Global</button>
      <button onclick="call15()">A.Postgres Global</button>
      <button onclick="call16()">MongoDB</button>
      
     <h5>Visualizations</h5>
      <button onclick="call40()">Tableua</button>
      <button onclick="call41()">RStudio</button>
      <button onclick="call43()">D3</button>
      <button onclick="call42()">Python Visualizations</button>
      <button onclick="call44()">ChartJS</button>	    
      <button onclick="call45()">Hipp Overview</button>	    
      	    
      <h5>Greenville Stack - Devops</h5>
      <button onclick="call27()">GEM Developer Overview</button>
      <button onclick="call32()">Greenville UI Kit</button>
      <button onclick="call33()">MyLink Preview</button>
      <button onclick="call34()">FusionDynamicWeb</button>
      <button onclick="call17()">FusionDevOps & AgilePlus</button>
      <button onclick="call23()">FusionShell</button>
      <button onclick="call24()">FusionPlus & FusionMobile</button>
      <button onclick="call25()">FusionPro ERP</button>
      <h5>Greenville Stack - Infrastructure & AI</h5>
      <button onclick="call18()">StrangeBrew</button>
      <button onclick="call19()">StrangeFarms</button>
      <button onclick="call20()">StrangeGrids</button>
      <button onclick="call21()">GEM Global</button>
      <button onclick="call28()">Velocity Wholesale</button>
      <button onclick="call29()">FusionAI Services & Augie</button>
    </div>

<!-- Main content -->
<div class="content" style="height: 800px;">

  <iframe
    src="./images/perspectives.jpg"
    style="width: 100%; height: 100%; object-fit: cover;"
    name="centercourt" id="centercourt"
 />
</div>

  </main>

      <!-- Footer -->
  <footer class="footer">
    &copy; 2025 Capitol Technology Solutions, Inc.
    <br>
    All rights reserved.
  </footer>
</body>
</html>
